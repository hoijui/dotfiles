#!/bin/bash

if !which docker >/dev/null 2>&1; then
  echo "command not found : docker " >&2
fi
CONTAINER=$(docker ps | peco | awk '{print $NF}')
# echo $PID

if [ -n "$CONTAINER" ]; then
  if sudo docker exec -t -i ${CONTAINER} which bash >/dev/null 2>&1; then
    sudo docker exec -it "${CONTAINER}" bash
  else
    sudo docker exec -it "${CONTAINER}" sh
  fi
  # || sudo docker exec -t -i ${CONTAINER} sh
  # "[ -e /bin/bash ] && /bin/bash || /bin/sh"
fi


